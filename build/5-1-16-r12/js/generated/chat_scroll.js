// Generated by CoffeeScript 1.6.3
(function() {
  window.ChatScroll = (function() {
    function ChatScroll(container, content) {
      var _this = this;
      this.container = container;
      this.content = content;
      this.skip_scroll = false;
      this.last_scroll = 0;
      this.container.scroll(function() {
        return _this.check();
      });
      this.container.bind('touchmove', function(e) {
        return _this.check();
      });
      $(window).resize(function() {
        return _this.toBottom();
      });
    }

    ChatScroll.prototype.check = function() {
      if (!this.skip_scroll) {
        return this.last_scroll = new Date().getTime();
      } else {
        return this.skip_scroll = false;
      }
    };

    ChatScroll.prototype.toBottom = function() {
      this.skip_scroll = true;
      return this.container.scrollTop(this.content.height());
    };

    ChatScroll.prototype.add = function() {
      var check_last_scroll, check_scroll_position;
      check_scroll_position = this.container.scrollTop() > this.content.height() - this.container.height() - 500;
      check_last_scroll = new Date().getTime() - this.last_scroll > 10000;
      if (check_last_scroll || check_scroll_position) {
        return this.toBottom();
      }
    };

    return ChatScroll;

  })();

}).call(this);
